import{b as je,h as x,a as ze,E as _t,r as Qe,H as pt,c as We,d as ge,s as Ee,e as j,f as ee,g as te,p as we,U as bt,i as K,j as s,k as mt,C as yt,l as ht,m as gt,n as Je,I as me,o as et,q as Ke,t as Et,u as wt,v as It,w as Tt,x as Nt,y as qt,z as Dt,A as Mt,B as tt,D as Ut,F as at,G as Ct,J as At,K as Rt,L as St,M as kt,N as xt,O as Ft,P as Lt,Q as Pt,R as Ot,S as Bt,T as Ht,V as Ne,W as qe,X as ae,Y as O,Z as f,_ as n,$ as lt,a0 as _,a1 as q,a2 as rt,a3 as P,a4 as De,a5 as z,a6 as g,a7 as Vt,a8 as Yt}from"./render.DyUDt7hM.js";/* empty css                       */const Gt="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(Gt);function G(e,t,[a,l]=[0,0]){x&&a===0&&ze();var r=e,o=null,v=null,m=bt,y=a>0?_t:0,E=!1;const c=(i,d=!0)=>{E=!0,b(d,i)},b=(i,d)=>{if(m===(m=i))return;let p=!1;if(x&&l!==-1){if(a===0){const T=Qe(r);T===pt?l=0:T===We?l=1/0:(l=parseInt(T.substring(1)),l!==l&&(l=m?1/0:-1))}const I=l>a;!!m===I&&(r=ge(),Ee(r),j(!1),p=!0,l=-1)}m?(o?ee(o):d&&(o=te(()=>d(r))),v&&we(v,()=>{v=null})):(v?ee(v):d&&(v=te(()=>d(r,[a+1,l]))),o&&we(o,()=>{o=null})),p&&j(!0)};je(()=>{E=!1,t(c),E||b(null,null)},y),x&&(r=K)}function $t(e,t,a,l){for(var r=[],o=t.length,v=0;v<o;v++)It(t[v].e,r,!0);var m=o>0&&r.length===0&&a!==null;if(m){var y=a.parentNode;Tt(y),y.append(a),l.clear(),V(e,t[0].prev,t[o-1].next)}Nt(r,()=>{for(var E=0;E<o;E++){var c=t[E];m||(l.delete(c.k),V(e,c.prev,c.next)),qt(c.e,!m)}})}function Jt(e,t,a,l,r,o=null){var v=e,m={flags:t,items:new Map,first:null};x&&ze();var y=null,E=!1,c=mt(()=>{var b=a();return tt(b)?b:b==null?[]:et(b)});je(()=>{var b=s(c),i=b.length;if(E&&i===0)return;E=i===0;let d=!1;if(x){var p=Qe(v)===We;p!==(i===0)&&(v=ge(),Ee(v),j(!1),d=!0)}if(x){for(var I=null,T,h=0;h<i;h++){if(K.nodeType===yt&&K.data===ht){v=K,d=!0,j(!1);break}var D=b[h],S=l(D,h);T=st(K,m,I,null,D,S,h,r,t,a),m.items.set(S,T),I=T}i>0&&Ee(ge())}x||Kt(b,m,v,r,t,l,a),o!==null&&(i===0?y?ee(y):y=te(()=>o(v)):y!==null&&we(y,()=>{y=null})),d&&j(!0),s(c)}),x&&(v=K)}function Kt(e,t,a,l,r,o,v){var m=e.length,y=t.items,E=t.first,c=E,b,i=null,d=[],p=[],I,T,h,D;for(D=0;D<m;D+=1){if(I=e[D],T=o(I,D),h=y.get(T),h===void 0){var S=c?c.e.nodes_start:a;i=st(S,t,i,i===null?t.first:i.next,I,T,D,l,r,v),y.set(T,i),d=[],p=[],c=i.next;continue}if(Xt(h,I,D),(h.e.f&me)!==0&&ee(h.e),h!==c){if(b!==void 0&&b.has(h)){if(d.length<p.length){var k=p[0],R;i=k.prev;var B=d[0],H=d[d.length-1];for(R=0;R<d.length;R+=1)Xe(d[R],k,a);for(R=0;R<p.length;R+=1)b.delete(p[R]);V(t,B.prev,H.next),V(t,i,B),V(t,H,k),c=k,i=H,D-=1,d=[],p=[]}else b.delete(h),Xe(h,c,a),V(t,h.prev,h.next),V(t,h,i===null?t.first:i.next),V(t,i,h),i=h;continue}for(d=[],p=[];c!==null&&c.k!==T;)(c.e.f&me)===0&&(b??=new Set).add(c),p.push(c),c=c.next;if(c===null)continue;h=c}d.push(h),i=h,c=h.next}if(c!==null||b!==void 0){for(var F=b===void 0?[]:et(b);c!==null;)(c.e.f&me)===0&&F.push(c),c=c.next;var N=F.length;if(N>0){var U=null;$t(t,F,U,y)}}Ke.first=t.first&&t.first.e,Ke.last=i&&i.e}function Xt(e,t,a,l){wt(e.v,t),e.i=a}function st(e,t,a,l,r,o,v,m,y,E){var c=(y&Dt)!==0,b=(y&Mt)===0,i=c?b?gt(r,!1,!1):Je(r):r,d=(y&Et)===0?v:Je(v),p={i:d,v:i,k:o,a:null,e:null,prev:a,next:l};try{return p.e=te(()=>m(e,i,d,E),x),p.e.prev=a&&a.e,p.e.next=l&&l.e,a===null?t.first=p:(a.next=p,a.e.next=p.e),l!==null&&(l.prev=p,l.e.prev=p.e),p}finally{}}function Xe(e,t,a){for(var l=e.next?e.next.e.nodes_start:a,r=t?t.e.nodes_start:a,o=e.e.nodes_start;o!==l;){var v=Ut(o);r.before(o),o=v}}function V(e,t,a){t===null?e.first=a:(t.next=a,t.e.next=a&&a.e),a!==null&&(a.prev=t,a.e.prev=t&&t.e)}function nt(e,t,a=!1){if(e.multiple){if(t==null)return;if(!tt(t))return Rt();for(var l of e.options)l.selected=t.includes(Q(l));return}for(l of e.options){var r=Q(l);if(St(r,t)){l.selected=!0;return}}(!a||t!==void 0)&&(e.selectedIndex=-1)}function Zt(e){var t=new MutationObserver(()=>{nt(e,e.__value)});t.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),At(()=>{t.disconnect()})}function Ie(e,t,a=t){var l=!0;at(e,"change",r=>{var o=r?"[selected]":":checked",v;if(e.multiple)v=[].map.call(e.querySelectorAll(o),Q);else{var m=e.querySelector(o)??e.querySelector("option:not([disabled])");v=m&&Q(m)}a(v)}),Ct(()=>{var r=t();if(nt(e,r,l),l&&r===void 0){var o=e.querySelector(":checked");o!==null&&(r=Q(o),a(r))}e.__value=r,l=!1}),Zt(e)}function Q(e){return"__value"in e?e.__value:e.value}const jt=Symbol("is custom element"),zt=Symbol("is html");function A(e){if(x){var t=!1,a=()=>{if(!t){if(t=!0,e.hasAttribute("value")){var l=e.value;X(e,"value",null),e.value=l}if(e.hasAttribute("checked")){var r=e.checked;X(e,"checked",null),e.checked=r}}};e.__on_r=a,kt(a),xt()}}function X(e,t,a,l){var r=Qt(e);x&&(r[t]=e.getAttribute(t),t==="src"||t==="srcset"||t==="href"&&e.nodeName==="LINK")||r[t]!==(r[t]=a)&&(t==="loading"&&(e[Ft]=a),a==null?e.removeAttribute(t):typeof a!="string"&&Wt(e).includes(t)?e[t]=a:e.setAttribute(t,a))}function Qt(e){return e.__attributes??={[jt]:e.nodeName.includes("-"),[zt]:e.namespaceURI===Lt}}var Ze=new Map;function Wt(e){var t=Ze.get(e.nodeName);if(t)return t;Ze.set(e.nodeName,t=[]);for(var a,l=e,r=Element.prototype;r!==l;){a=Ot(l);for(var o in a)a[o].set&&t.push(o);l=Pt(l)}return t}function M(e,t,a=t){at(e,"input",l=>{var r=l?e.defaultValue:e.value;if(r=ye(e)?he(r):r,a(r),r!==(r=t())){var o=e.selectionStart,v=e.selectionEnd;e.value=r??"",v!==null&&(e.selectionStart=o,e.selectionEnd=Math.min(v,e.value.length))}}),(x&&e.defaultValue!==e.value||Bt(t)==null&&e.value)&&a(ye(e)?he(e.value):e.value),Ht(()=>{var l=t();ye(e)&&l===he(e.value)||e.type==="date"&&!l&&!e.value||l!==e.value&&(e.value=l??"")})}function ye(e){var t=e.type;return t==="number"||t==="range"}function he(e){return e===""?null:+e}const ea=async({title:e,content:t,options:a})=>{let l={font:a.font,margin:parseInt(a.margin)};try{return await(await fetch("http://localhost:8000/generate-simple",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:e,content:t,options:l})})).blob()}catch(r){return console.log(r),r}},ta=async e=>{console.log({...e});try{const t=await fetch("http://localhost:8000/generate-invoice",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...e})});if(!t.ok){const a=await t.text();throw new Error(`Error HTTP: ${t.status} - ${a}`)}return await t.blob()}catch(t){throw t}};var aa=O('<button class="download-button svelte-120oplc"><a download="documento.pdf" class="download-button svelte-120oplc">Descargar PDF</a></button>'),la=(e,t)=>g(t,""),ra=O('<div class="pdf-modal-overlay svelte-120oplc"><div class="pdf-modal-content svelte-120oplc"><iframe title="Vista previa del pdf" class="svelte-120oplc"></iframe> <button class="close-modal-button svelte-120oplc">Cerrar</button></div></div>'),sa=O('<div style="display: flex; flex-direction: column; justify-content: center; align-items: center; height: auto;"><form class="pdf-form svelte-120oplc"><input type="text" placeholder="Escriba el titulo" required class="svelte-120oplc"/> <textarea placeholder="Escribe aqui el contenido" class="svelte-120oplc"></textarea> <label for="margin" class="svelte-120oplc">Márgenes</label> <select id="margin" class="svelte-120oplc"><option>5mm - 0.5cm</option><option>10mm - 1cm</option><option>20mm - 2cm</option><option>30mm - 3cm</option><option>40mm - 4cm</option></select> <label for="fonts" class="svelte-120oplc">Fuente</label> <select id="fonts" class="svelte-120oplc"><option>Arial</option><option>Times New Roman</option></select> <button type="submit" class="svelte-120oplc">Generar PDF</button> <!></form> <!></div>');function na(e,t){qe(t,!0);let a=q(""),l=q(""),r=ae({font:"arial",margin:20}),o=q(""),v=q("");const m=async N=>{N.preventDefault();const U=await ea({title:s(a),content:s(l),options:r});g(v,URL.createObjectURL(U),!0),g(o,URL.createObjectURL(U),!0)};var y=sa(),E=f(y),c=f(E);A(c);var b=n(c,2);lt(b);var i=n(b,4),d=f(i);d.value=d.__value="05";var p=n(d);p.value=p.__value="10";var I=n(p);I.value=I.__value="20";var T=n(I);T.value=T.__value="30";var h=n(T);h.value=h.__value="40",_(i);var D=n(i,4),S=f(D);S.value=S.__value="arial";var k=n(S);k.value=k.__value="times",_(D);var R=n(D,4);{var B=N=>{var U=aa(),Y=f(U);_(U),z(()=>X(Y,"href",s(o))),P(N,U)};G(R,N=>{s(v)!=""&&t.isMobile&&N(B)})}_(E);var H=n(E,2);{var F=N=>{var U=ra(),Y=f(U),$=f(Y),W=n($,2);W.__click=[la,v],_(Y),_(U),z(()=>X($,"src",s(v))),P(N,U)};G(H,N=>{s(v)!=""&&!t.isMobile&&N(F)})}_(y),rt("submit",E,m),M(c,()=>s(a),N=>g(a,N)),M(b,()=>s(l),N=>g(l,N)),Ie(i,()=>r.margin,N=>r.margin=N),Ie(D,()=>r.font,N=>r.font=N),P(e,y),De()}Ne(["click"]);const ia=(e,t,a)=>{s(t).push({id:crypto.randomUUID(),code:s(t).length+1,description:"",quantity:1,priceEachUnit:0,discount:0}),g(a,!0),setTimeout(()=>{g(a,!1)},3e3)};var oa=(e,t,a)=>t(s(a).id),va=O('<div class="product-item svelte-l6ys9t"><label class="svelte-l6ys9t">Código: <input type="number" required class="svelte-l6ys9t"/></label> <label class="svelte-l6ys9t">Cantidad: <input type="number" required min="1" class="svelte-l6ys9t"/></label> <label class="svelte-l6ys9t"> <input type="number" required step="0.01" min="0" class="svelte-l6ys9t"/></label> <label class="svelte-l6ys9t">Descuento (%): <input type="number" required min="0" max="100" class="svelte-l6ys9t"/></label> <label class="description-label svelte-l6ys9t">Descripción: <textarea required class="svelte-l6ys9t"></textarea></label> <button type="button" class="remove-button svelte-l6ys9t">Eliminar Producto</button></div>'),ca=O('<span class="new-product-indicator svelte-l6ys9t">Inserte los datos del producto nuevo</span>'),ua=O('<button class="download-button svelte-l6ys9t"><a download="documento.pdf" class="download-button svelte-l6ys9t">Descargar PDF</a></button>'),da=(e,t)=>g(t,""),fa=O('<div class="pdf-modal-overlay svelte-l6ys9t"><div class="pdf-modal-content svelte-l6ys9t"><iframe title="Vista previa del pdf" class="svelte-l6ys9t"></iframe> <button class="close-modal-button svelte-l6ys9t">Cerrar</button></div></div>'),_a=O('<div><form class="invoice-form svelte-l6ys9t"><h2 class="svelte-l6ys9t">Datos de la Empresa Emisora</h2> <div class="form-section svelte-l6ys9t"><label class="svelte-l6ys9t">Nombre de la Empresa: <input type="text" required class="svelte-l6ys9t"/></label> <label class="svelte-l6ys9t">RIF de la Empresa: <input type="text" required class="svelte-l6ys9t"/></label> <label class="svelte-l6ys9t">Dirección de la Empresa: <input type="text" required class="svelte-l6ys9t"/></label> <label class="svelte-l6ys9t">Estado de la Empresa: <input type="text" required class="svelte-l6ys9t"/></label> <label class="svelte-l6ys9t">Número de Factura: <input type="number" required class="svelte-l6ys9t"/></label> <label class="svelte-l6ys9t">Fecha de Factura: <input type="date" required class="svelte-l6ys9t"/></label></div> <h2 class="svelte-l6ys9t">Datos del Cliente</h2> <div class="form-section svelte-l6ys9t"><label class="svelte-l6ys9t">RIF del Cliente: <input type="text" required class="svelte-l6ys9t"/></label> <label class="svelte-l6ys9t">Nombre del Cliente (Empresa/Persona): <input type="text" required class="svelte-l6ys9t"/></label> <label class="svelte-l6ys9t">Dirección del Cliente: <input type="text" required class="svelte-l6ys9t"/></label></div> <h2 class="svelte-l6ys9t">Productos</h2> <label class="svelte-l6ys9t">Moneda <select class="svelte-l6ys9t"><option>Dólar</option><option>Euro</option><option>Bolívares</option></select></label> <label class="svelte-l6ys9t">% IVA <input type="number" required min="1" max="100" class="svelte-l6ys9t"/></label> <div class="products-section svelte-l6ys9t"><!> <div class="add-product-controls svelte-l6ys9t"><button type="button" class="add-product-button svelte-l6ys9t">Añadir Otro Producto</button> <!></div></div> <button type="submit" class="submit-button svelte-l6ys9t">Generar Factura PDF</button> <!></form> <!></div>');function pa(e,t){qe(t,!0);let a=q(""),l=q(""),r=q(""),o=q(""),v=q(""),m=q(""),y=q(0),E=q(ae(new Date().toISOString().split("T")[0])),c=q(""),b=q(""),i=q(""),d=q("$"),p=q(0),I=q(ae([{id:crypto.randomUUID(),code:1,description:"",quantity:1,priceEachUnit:0,discount:0}])),T=q(!1);const h=u=>{g(I,s(I).filter(w=>w.id!==u),!0)},D=async u=>{u.preventDefault();const w={company:s(r),rif:s(o),direction:s(v),state:s(m),invoiceNr:Number(s(y)),date:s(E),rifClient:s(c),companyClient:s(b),directionClient:s(i),products:s(I).map(C=>({code:Number(C.code),description:C.description,quantity:Number(C.quantity),priceEachUnit:Number(C.priceEachUnit),discount:Number(C.discount)})),currency:s(d),iva:s(p)};try{const C=await ta(w);g(a,URL.createObjectURL(C),!0),g(l,URL.createObjectURL(C),!0)}catch(C){console.log(C.message),alert("Error al generar el PDF. Revisa la consola para más detalles.")}};var S=_a(),k=f(S),R=n(f(k),2),B=f(R),H=n(f(B));A(H),_(B);var F=n(B,2),N=n(f(F));A(N),_(F);var U=n(F,2),Y=n(f(U));A(Y),_(U);var $=n(U,2),W=n(f($));A(W),_($);var le=n($,2),Me=n(f(le));A(Me),_(le);var Ue=n(le,2),Ce=n(f(Ue));A(Ce),_(Ue),_(R);var re=n(R,4),se=f(re),Ae=n(f(se));A(Ae),_(se);var ne=n(se,2),Re=n(f(ne));A(Re),_(ne);var Se=n(ne,2),ke=n(f(Se));A(ke),_(Se),_(re);var ie=n(re,4),oe=n(f(ie)),ve=f(oe);ve.value=ve.__value="$";var ce=n(ve);ce.value=ce.__value="€";var xe=n(ce);xe.value=xe.__value="Bs",_(oe),_(ie);var ue=n(ie,2),Fe=n(f(ue));A(Fe),_(ue);var de=n(ue,2),Le=f(de);Jt(Le,17,()=>s(I),u=>u.id,(u,w,C)=>{var J=va(),Z=f(J),Be=n(f(Z));A(Be),_(Z);var fe=n(Z,2),He=n(f(fe));A(He),_(fe);var _e=n(fe,2),Ve=f(_e),Ye=n(Ve);A(Ye),_(_e);var pe=n(_e,2),Ge=n(f(pe));A(Ge),_(pe);var be=n(pe,2),$e=n(f(be));lt($e),_(be);var ft=n(be,2);ft.__click=[oa,h,w],_(J),z(()=>Vt(Ve,`Precio Unitario (${s(d)??""}): `)),M(Be,()=>s(w).code,L=>s(w).code=L),M(He,()=>s(w).quantity,L=>s(w).quantity=L),M(Ye,()=>s(w).priceEachUnit,L=>s(w).priceEachUnit=L),M(Ge,()=>s(w).discount,L=>s(w).discount=L),M($e,()=>s(w).description,L=>s(w).description=L),P(u,J)});var Pe=n(Le,2),Oe=f(Pe);Oe.__click=[ia,I,T];var it=n(Oe,2);{var ot=u=>{var w=ca();P(u,w)};G(it,u=>{s(T)&&u(ot)})}_(Pe),_(de);var vt=n(de,4);{var ct=u=>{var w=ua(),C=f(w);_(w),z(()=>X(C,"href",s(l))),P(u,w)};G(vt,u=>{s(a)!=""&&t.isMobile&&u(ct)})}_(k);var ut=n(k,2);{var dt=u=>{var w=fa(),C=f(w),J=f(C),Z=n(J,2);Z.__click=[da,a],_(C),_(w),z(()=>X(J,"src",s(a))),P(u,w)};G(ut,u=>{s(a)!=""&&!t.isMobile&&u(dt)})}_(S),rt("submit",k,D),M(H,()=>s(r),u=>g(r,u)),M(N,()=>s(o),u=>g(o,u)),M(Y,()=>s(v),u=>g(v,u)),M(W,()=>s(m),u=>g(m,u)),M(Me,()=>s(y),u=>g(y,u)),M(Ce,()=>s(E),u=>g(E,u)),M(Ae,()=>s(c),u=>g(c,u)),M(Re,()=>s(b),u=>g(b,u)),M(ke,()=>s(i),u=>g(i,u)),Ie(oe,()=>s(d),u=>g(d,u)),M(Fe,()=>s(p),u=>g(p,u)),P(e,S),De()}Ne(["click"]);const Te=ae({format:"basic"}),ba=e=>{Te.format=e},ma=e=>{ba(e.target.value)};var ya=O('<div class="pdf-generator-container svelte-goea74"><label class="svelte-goea74">Escoge la plantilla que desees <select class="svelte-goea74"><option>Básico</option><option>Factura</option></select></label> <!></div>');function Ea(e,t){qe(t,!0);let a=q(!1);const l=()=>{if(!window.matchMedia("(max-width: 700px)").matches){g(a,!1);return}g(a,!0)};Yt(()=>(typeof window!=null&&(l(),window.matchMedia("(max-width: 700px)").addEventListener("change",l)),()=>{window.matchMedia().removeEventListener("change",l)}));var r=ya(),o=f(r),v=n(f(o));v.__change=[ma];var m=f(v);m.value=m.__value="basic";var y=n(m);y.value=y.__value="invoice",_(v),_(o);var E=n(o,2);{var c=i=>{na(i,{get isMobile(){return s(a)},set isMobile(d){g(a,d,!0)}})},b=(i,d)=>{{var p=I=>{pa(I,{get isMobile(){return s(a)},set isMobile(T){g(a,T,!0)}})};G(i,I=>{Te.format.toLowerCase()=="invoice"&&I(p)},d)}};G(E,i=>{Te.format.toLowerCase()=="basic"?i(c):i(b,!1)})}_(r),P(e,r),De()}Ne(["change"]);export{Ea as default};
